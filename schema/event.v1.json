{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vib3.plus/schema/event.v1.json",
  "title": "event.v1",
  "type": "object",
  "additionalProperties": false,
  "required": ["type", "timestamp", "payload"],
  "properties": {
    "type": {
      "type": "string",
      "enum": ["input", "holo_frame", "agent"],
      "description": "Event classification for routing"
    },
    "timestamp": {"type": "number", "description": "Monotonic timestamp in seconds"},
    "payload": {
      "type": "object",
      "description": "Minimal parameter surface and optional HOLO_FRAME data",
      "additionalProperties": false,
      "required": ["POINTER_DELTA", "ZOOM_DELTA", "ROT_DELTA", "INPUT_TRIGGER"],
      "properties": {
        "POINTER_DELTA": {
          "type": "object",
          "required": ["dx", "dy"],
          "additionalProperties": false,
          "properties": {
            "dx": {"type": "number"},
            "dy": {"type": "number"}
          }
        },
        "ZOOM_DELTA": {"type": "number"},
        "ROT_DELTA": {"type": "number"},
        "INPUT_TRIGGER": {"type": "boolean"},
        "HOLO_FRAME": {
          "type": "object",
          "description": "Optional holographic alignment frame for synchronized ingest",
          "required": ["quaternion", "translation", "surface"],
          "additionalProperties": false,
          "properties": {
            "quaternion": {
              "type": "array",
              "items": {"type": "number"},
              "minItems": 4,
              "maxItems": 4
            },
            "translation": {
              "type": "array",
              "items": {"type": "number"},
              "minItems": 3,
              "maxItems": 3
            },
            "surface": {"type": "string"},
            "metadata": {"type": "object"}
          }
        }
      }
    }
  }
}
